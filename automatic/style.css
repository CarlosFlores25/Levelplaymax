/* ============================================================
   1. CONFIGURACIÓN BASE Y TEMA
   ============================================================ */
:root {
    --primary: #0072ff;
    --secondary: #00c6ff;
    --success: #00ff88;
    --danger: #ff0055;
    --font-display: 'Rajdhani', sans-serif;
    --font-body: 'Outfit', sans-serif;
    --nav-height-mobile: 60px;
}

* {
    box-sizing: border-box;
}

body {
    background: radial-gradient(circle at top left, #001f3f, #050505);
    min-height: 100vh;
    font-family: var(--font-body);
    color: white;
    margin: 0;

    /* App Feeling */
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
}

/* Ocultar elementos móviles por defecto */
.mobile-top-bar,
.mobile-more-btn,
.mobile-menu-header,
.btn-close-menu {
    display: none;
}

/* Scrollbar global (Fina y oscura) */
::-webkit-scrollbar {
    width: 5px;
    height: 5px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: #333;
    border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--secondary);
}

/* ============================================================
   2. DASHBOARD Y BILLETERA
   ============================================================ */
.wallet-card {
    background: linear-gradient(135deg, #00c6ff, #0072ff);
    border-radius: 24px;
    padding: 2.5rem;
    text-align: center;
    color: white;
    margin-bottom: 2.5rem;
    position: relative;
    overflow: hidden;
    box-shadow: 0 10px 40px rgba(0, 114, 255, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.wallet-card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 60%);
    animation: rotate 10s linear infinite;
    pointer-events: none;
}

@keyframes rotate {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }
}

.wallet-label {
    position: relative;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    opacity: 0.9;
    z-index: 2;
}

.wallet-amount {
    position: relative;
    font-family: var(--font-display);
    font-size: 4rem;
    font-weight: 800;
    margin: 10px 0;
    text-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    z-index: 2;
    line-height: 1.1;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
}

.stat-card {
    background: rgba(255, 255, 255, 0.05);
    padding: 1.5rem;
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.stat-card h3 {
    font-size: 0.8rem;
    text-transform: uppercase;
    color: #aaa;
    letter-spacing: 1px;
}

.stat-card p {
    font-size: 2rem;
    font-weight: bold;
    margin-top: 5px;
    font-family: var(--font-display);
}

/* ============================================================
   3. BOTONES Y ACCIONES
   ============================================================ */
button {
    cursor: pointer;
}

.buy-btn,
.cta-button-main {
    width: 100%;
    background: var(--success);
    color: #000;
    border: none;
    padding: 12px;
    border-radius: 50px;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-top: 15px;
    transition: 0.3s;
    box-shadow: 0 5px 15px rgba(0, 255, 136, 0.2);
}

.buy-btn:hover {
    transform: scale(1.02);
    box-shadow: 0 10px 25px rgba(0, 255, 136, 0.4);
    background: #fff;
}

.btn-text {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #ccc;
    padding: 10px 20px;
    border-radius: 50px;
    font-weight: bold;
    transition: 0.2s;
}

.btn-text:hover {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border-color: white;
}

/* Botones de acción dentro de tarjetas (3 columnas) */
.card-actions {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 8px;
    margin-top: 15px;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    padding-top: 10px;
}

.action-btn {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #ddd;
    padding: 8px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.8rem;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
    transition: 0.2s;
}

.action-btn.primary {
    border-color: var(--secondary);
    color: var(--secondary);
}

.action-btn.success {
    border-color: var(--success);
    color: var(--success);
}

.action-btn.danger {
    border-color: var(--danger);
    color: var(--danger);
}

.action-btn:hover {
    background: rgba(255, 255, 255, 0.05);
}

/* ============================================================
   4. STOCK Y LISTAS (CARDS)
   ============================================================ */
/* Contenedores Grid */
.stock-grid,
.cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 1.5rem;
    padding: 1rem 0;
}

/* Tarjetas (Stock e Inventario) */
.stock-item,
.data-card {
    background: rgba(20, 20, 25, 0.6);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 20px;
    padding: 1.5rem;
    transition: 0.3s;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.stock-item:hover,
.data-card:hover {
    transform: translateY(-5px);
    border-color: var(--secondary);
    box-shadow: 0 10px 30px -10px rgba(0, 198, 255, 0.3);
}

.stock-name {
    font-family: var(--font-body);
    font-size: 1rem;
    font-weight: 600;
    text-transform: uppercase;
    margin-bottom: 5px;
    height: 2.5em;
    overflow: hidden;
    display: -webkit-box;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    text-align: center;
}

.stock-qty {
    font-family: var(--font-display);
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--secondary);
    margin: 5px 0;
    text-shadow: 0 0 15px rgba(0, 198, 255, 0.3);
    text-align: center;
}

.label-disp {
    font-size: 0.75rem;
    color: #aaa;
    text-transform: uppercase;
    text-align: center;
    letter-spacing: 1px;
}

/* Elementos Internos de la Data Card */
.card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 8px;
    margin-bottom: 5px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.card-title {
    font-weight: bold;
    font-size: 1rem;
    color: white;
    display: flex;
    align-items: center;
    gap: 8px;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}

.card-badge {
    font-size: 0.75rem;
    padding: 4px 8px;
    border-radius: 6px;
    font-weight: bold;
    white-space: nowrap;
}

.card-body {
    font-size: 0.9rem;
    color: #aaa;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.data-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    overflow: hidden;
}

.card-select {
    background: #0a0a0a;
    border: 1px solid #333;
    color: white;
    padding: 8px;
    border-radius: 8px;
    width: 100%;
    font-size: 0.9rem;
    max-width: 100%;
}

/* Logos */
.plat-icon-lg {
    width: 50px;
    height: 50px;
    object-fit: contain;
    margin: 0 auto 10px auto;
    display: block;
    filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.1));
}

.plat-icon-sm {
    width: 24px;
    height: 24px;
    min-width: 24px;
    object-fit: contain;
    filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.2));
}

/* ============================================================
   5. SECCIÓN DE PAGOS
   ============================================================ */
.payments-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 1.5rem;
    margin-bottom: 3rem;
}

.pay-card {
    background: rgba(255, 255, 255, 0.03);
    border-radius: 20px;
    padding: 1.5rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
    overflow: hidden;
}

.pay-card:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: var(--brand);
    opacity: 0.8;
}

.pay-card:hover {
    transform: translateY(-5px);
    border-color: var(--brand);
    box-shadow: 0 5px 20px -5px var(--glow);
}

/* Colores Marca */
.binance {
    --brand: #F0B90B;
    --glow: rgba(240, 185, 11, 0.4);
}

.zinli {
    --brand: #A020F0;
    --glow: rgba(160, 32, 240, 0.4);
}

.pm {
    --brand: #0072ff;
    --glow: rgba(0, 114, 255, 0.4);
}

.pay-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
}

.pay-header img {
    width: 30px;
    height: 30px;
    object-fit: contain;
}

.copy-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.05);
    padding: 8px 12px;
    border-radius: 10px;
    margin-top: 5px;
}

.copy-row span {
    font-family: monospace;
    font-size: 0.9rem;
    color: #ddd;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-right: 5px;
}

.copy-btn-icon {
    background: none;
    border: none;
    color: var(--brand);
    cursor: pointer;
    font-size: 1.1rem;
}

/* ============================================================
   6. EDICIÓN, INPUTS Y SWITCH
   ============================================================ */
/* Inputs pequeños para editar perfil */
.mini-input {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid #444;
    color: white;
    padding: 6px;
    border-radius: 4px;
    font-size: 0.9rem;
    width: 100%;
    text-align: center;
    transition: 0.2s;
}

.mini-input:focus {
    border-color: var(--secondary);
    background: #000;
    outline: none;
}

.profile-edit-row {
    display: flex;
    gap: 8px;
    margin: 8px 0;
    background: rgba(0, 0, 0, 0.3);
    padding: 8px;
    border-radius: 8px;
    align-items: center;
}

.edit-group {
    display: flex;
    align-items: center;
    gap: 5px;
    flex: 1;
}

.edit-group small {
    color: #aaa;
    white-space: nowrap;
}

.btn-save-mini {
    background: var(--secondary);
    color: #000;
    border: none;
    padding: 6px 10px;
    border-radius: 4px;
    font-weight: bold;
    cursor: pointer;
}

/* Switch iOS */
.switch-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: rgba(255, 255, 255, 0.02);
    padding: 8px;
    border-radius: 8px;
    margin-top: 8px;
}

.switch {
    position: relative;
    display: inline-block;
    width: 40px;
    height: 22px;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #444;
    transition: .4s;
    border-radius: 34px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 16px;
    width: 16px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}

input:checked+.slider {
    background-color: var(--success);
}

input:checked+.slider:before {
    transform: translateX(18px);
}

/* ============================================================
   7. ELEMENTOS FLOTANTES (Modales, Notif, Loader)
   ============================================================ */
/* Modales */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(8px);
    z-index: 9999;
    justify-content: center;
    align-items: center;
    padding: 1rem;
}

.modal-content {
    width: 100%;
    max-width: 450px;
    max-height: 90vh;
    overflow-y: auto;
    background: #111;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    padding: 1.5rem;
    position: relative;
    box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
}

.close-modal {
    position: absolute;
    top: 15px;
    right: 15px;
    font-size: 1.5rem;
    cursor: pointer;
    color: #888;
}

.glass-card {
    background: rgba(20, 20, 20, 0.6);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 12px;
}

/* Preloader */
#preloader {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #050505;
    z-index: 10000;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    transition: opacity 0.6s ease;
}

#preloader.hide {
    opacity: 0;
    pointer-events: none;
}

.loader-spinner {
    width: 50px;
    height: 50px;
    border: 4px solid #333;
    border-top: 4px solid var(--secondary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 15px;
}

@keyframes spin {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

/* Notificaciones (Toast) */
#toast-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 11000;
    display: flex;
    flex-direction: column;
    gap: 10px;
    pointer-events: none;
}

.toast {
    background: rgba(20, 25, 30, 0.95);
    border-left: 4px solid var(--success);
    color: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    gap: 10px;
    min-width: 250px;
    animation: slideIn 0.3s forwards;
    pointer-events: auto;
}

.toast.info {
    border-left-color: var(--secondary);
}

.toast.error {
    border-left-color: var(--danger);
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
    }

    to {
        transform: translateX(0);
    }
}

/* Badge de Punto Rojo */
.pulse-badge {
    position: absolute;
    top: 10px;
    right: 15px;
    width: 10px;
    height: 10px;
    background-color: var(--danger);
    border-radius: 50%;
    box-shadow: 0 0 10px var(--danger);
    animation: pulse-red 1.5s infinite;
    display: none;
}

@keyframes pulse-red {
    0% {
        transform: scale(0.9);
        opacity: 0.8;
    }

    70% {
        transform: scale(1.1);
        opacity: 1;
        box-shadow: 0 0 10px var(--danger);
    }

    100% {
        transform: scale(0.9);
        opacity: 0.8;
    }
}

/* Centro de Mensajes */
.notif-card {
    background: rgba(255, 255, 255, 0.04);
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 10px;
    transition: 0.2s;
}

.notif-global {
    border-left: 3px solid var(--secondary);
}

.notif-private {
    border-left: 3px solid #e100ff;
}

.notif-card:hover {
    background: rgba(255, 255, 255, 0.07);
    transform: translateX(5px);
}

/* Tutorial Styles */
.t-step {
    display: flex;
    gap: 15px;
    background: rgba(255, 255, 255, 0.03);
    padding: 15px;
    border-radius: 12px;
    margin-bottom: 15px;
}

.t-icon {
    min-width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
}

/* Login Page Styles */
.reseller-login-card {
    border: 1px solid var(--secondary);
    box-shadow: 0 0 40px rgba(0, 198, 255, 0.15);
    max-width: 400px;
    margin: auto;
}

.reseller-login-btn {
    background: linear-gradient(90deg, #00c6ff, #0072ff);
    color: white;
    width: 100%;
    border-radius: 50px;
    padding: 12px;
    font-weight: bold;
    border: none;
    margin-top: 20px;
    transition: 0.3s;
    cursor: pointer;
}

/* ============================================================
   8. MEDIA QUERIES (RESPONSIVIDAD MÓVIL UNIFICADA)
   ============================================================ */
@media (max-width: 768px) {

    /* Layout General Móvil */
    .admin-container {
        padding: 0;
        margin: 0;
    }

    .main-content {
        margin-left: 0;
        padding: 70px 10px 100px 10px;
        width: 100%;
        overflow-x: hidden;
    }

    /* Barra Superior e Inferior */
    .mobile-top-bar {
        display: flex !important;
        position: fixed;
        top: 0;
        width: 100%;
        height: 60px;
        background: rgba(5, 5, 10, 0.95);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        z-index: 1000;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(10px);
    }

    .logo-text {
        font-size: 1.4rem;
        font-family: var(--font-display);
        font-weight: 700;
        color: white;
    }

    /* Menú Inferior Fijo */
    .sidebar {
        position: fixed;
        bottom: 0;
        top: auto;
        left: 0;
        width: 100%;
        height: var(--nav-height-mobile);
        background: #000;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        z-index: 2000;
        display: flex;
        border-right: none;
        padding: 0;
        overflow: visible;
    }

    .sidebar-header {
        display: none;
    }

    .nav-main {
        display: flex;
        width: 100%;
        justify-content: space-around;
        align-items: center;
        padding: 0;
    }

    .nav-btn {
        flex-direction: column;
        font-size: 0.65rem;
        padding: 0;
        height: 100%;
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 3px;
        border-radius: 0;
        color: #666;
        background: none !important;
        border: none !important;
    }

    .nav-btn svg {
        width: 22px;
        height: 22px;
        margin: 0;
    }

    .nav-btn.active {
        color: var(--secondary);
        box-shadow: inset 0 -3px 0 var(--secondary);
        transform: none;
        border: none;
        background: rgba(0, 198, 255, 0.05) !important;
    }

    .mobile-more-btn {
        display: flex !important;
    }

    /* Menú Desplegable (Cajón) */
    .nav-extra {
        position: fixed;
        bottom: var(--nav-height-mobile);
        left: 0;
        width: 100%;
        background: rgba(10, 15, 25, 0.98);
        border-top: 1px solid var(--secondary);
        border-radius: 20px 20px 0 0;
        padding: 1.5rem;
        transform: translateY(120%);
        transition: transform 0.3s;
        z-index: 1900;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        max-height: 80vh;
        overflow-y: auto;
    }

    .nav-extra.open {
        transform: translateY(0);
    }

    .nav-extra .nav-btn {
        flex-direction: row;
        background: rgba(255, 255, 255, 0.05) !important;
        padding: 1rem;
        border-radius: 12px;
        font-size: 0.9rem;
        justify-content: flex-start;
        height: auto;
        box-shadow: none !important;
        color: white;
    }

    .nav-extra .nav-btn svg {
        margin-right: 10px;
    }

    .mobile-menu-header {
        grid-column: 1/-1;
        text-align: center;
        color: var(--secondary);
        margin-bottom: 5px;
        font-family: var(--font-display);
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .btn-close-menu {
        grid-column: 1/-1;
        display: block !important;
        padding: 10px;
        border: none;
        background: none;
        color: #666;
        font-weight: bold;
        width: 100%;
    }

    /* Elementos Internos Ajustados */
    .wallet-amount {
        font-size: 2.8rem !important;
    }

    .page-title {
        font-size: 1.5rem;
        text-align: center;
    }

    /* Forzar tarjetas a ancho completo y 1 columna */
    .stock-grid,
    .cards-grid,
    .payments-grid {
        grid-template-columns: 1fr !important;
        gap: 15px;
    }

    .data-card,
    .stock-item,
    .pay-card,
    .wallet-card {
        padding: 1.2rem !important;
        margin: 0 !important;
        width: 100% !important;
        min-height: auto !important;
    }

    /* Solución de texto y desbordamiento (Wrap Break) */
    .stock-name,
    .card-title,
    .data-row span,
    .data-row strong,
    p {
        white-space: normal !important;
        overflow-wrap: break-word !important;
        word-wrap: break-word;
        max-width: 100%;
        word-break: break-word;
    }

    /* Cabeceras de tarjetas que no se aplasten */
    .card-header {
        align-items: flex-start;
    }

    .card-title {
        font-size: 0.95rem;
    }

    /* Logos compactos en móvil */
    .plat-icon-lg {
        width: 35px !important;
        height: 35px !important;
        margin-bottom: 5px;
    }

    .plat-icon-sm {
        width: 20px !important;
        height: 20px !important;
        margin-right: 5px;
        min-width: 20px;
    }

    /* Fix para fila de edición (para que el botón guardar quepa) */
    .profile-edit-row {
        flex-direction: column;
        padding: 10px;
        align-items: stretch;
    }

    .edit-group {
        justify-content: space-between;
        margin-bottom: 5px;
    }

    .mini-input {
        width: 65% !important;
    }

    .btn-save-mini {
        width: 100%;
        margin-top: 8px;
        padding: 10px;
        font-size: 1rem;
    }

    .btn-save-mini::after {
        content: ' GUARDAR';
    }

    /* Toasts abajo */
    #toast-container {
        top: auto;
        bottom: 70px;
        right: 10px;
        left: 10px;
        align-items: center;
    }

    .toast {
        width: 100%;
        min-width: 0;
        box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.5);
    }
}

/* ESCRITORIO (RESETS) */
@media (min-width: 769px) {
    .nav-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .nav-extra {
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        padding-top: 10px;
        margin-top: 10px;
    }

    .mobile-menu-header,
    .btn-close-menu {
        display: none;
    }
}

/* ============================================================
   FIX: FORMULARIOS Y TEXTOS CORTADOS (MÓVIL)
   ============================================================ */
@media (max-width: 768px) {

    /* 1. ARREGLO DE FORMULARIOS (Perfil y Registro) */
    /* Busca cualquier div que tenga grid de 2 columnas y lo vuelve de 1 sola */
    form div[style*="grid-template-columns"],
    div[style*="grid-template-columns: 1fr 1fr"] {
        display: flex !important;
        flex-direction: column !important;
        gap: 10px !important;
    }
    
    /* 2. ARREGLO DE ETIQUETAS (LABELS) */
    /* Evita que "Nombre y Apellido" se corte */
    label, small, span {
        white-space: normal !important; /* Permite saltos de línea */
        max-width: 100% !important;
        display: block !important; /* Ocupa todo el ancho */
    }

    /* 3. ARREGLO DE LAS FILAS DE DATOS EN TARJETAS */
    /* Pone la etiqueta (Ej: "Usuario:") ARRIBA y el dato ABAJO */
    .data-row {
        flex-direction: column !important; /* Vertical */
        align-items: flex-start !important; /* Alineado a la izquierda */
        border-bottom: 1px dashed rgba(255,255,255,0.05); /* Separador sutil */
        padding-bottom: 5px;
        margin-bottom: 5px;
        gap: 2px !important;
    }

    .data-row span:first-child {
        /* Estilo para la etiqueta (ej: "Email:") */
        color: #888;
        font-size: 0.75rem !important;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    .data-row strong, 
    .data-row span:not(:first-child) {
        /* Estilo para el dato (ej: "juan@gmail.com") */
        width: 100%;
        overflow-wrap: break-word; /* Romper emails largos */
        font-size: 1rem !important;
    }

    /* 4. Inputs en formularios */
    input, select {
        width: 100% !important; /* Que ocupe toda la pantalla */
        font-size: 16px !important; /* Tamaño legible */
    }

    /* 5. Fix Específico para el Header del Perfil */
    .glass-card > div[style*="display:grid"] {
        display: flex !important;
        flex-direction: column;
    }
}

/* Puntos del tutorial */
.dot { width: 10px; height: 10px; background: #333; border-radius: 50%; display: inline-block; transition:0.3s; }
.dot.active { background: #00c6ff; transform: scale(1.3); }

/* Animación de entrada tutorial */
#tut-content { animation: fadeInUp 0.5s ease; }

/* MEJORA VISUAL NOTIFICACIONES */
.notif-content-box {
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    
    /* ESTO ES LA CLAVE DE LOS SALTOS DE LÍNEA: */
    white-space: pre-wrap; /* Respeta los enters del mensaje */
    line-height: 1.6;      /* Espacio entre líneas para leer mejor */
    font-size: 0.95rem;
    color: #e0e0e0;
    font-family: 'Outfit', sans-serif;
}

/* ESTILOS DE POLÍTICAS */
.policy-content {
    overflow-y: auto;
    max-height: 60vh;
    padding-right: 5px;
    color: #ddd;
    font-size: 0.9rem;
    line-height: 1.6;
}

.policy-item {
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px dashed rgba(255,255,255,0.05);
}

.policy-item:last-child { border: none; }

.policy-item h4 {
    color: white;
    font-size: 1.1rem;
    margin-bottom: 10px;
    border-left: 3px solid #ffbb00; /* Color dorado */
    padding-left: 10px;
}

.policy-item ul {
    margin-top: 5px;
    padding-left: 20px;
    color: #ccc;
}

.policy-item li {
    margin-bottom: 8px;
}

/* Scroll fino para lectura */
.policy-content::-webkit-scrollbar { width: 4px; }
.policy-content::-webkit-scrollbar-thumb { background: #555; border-radius: 4px; }

/* ============================================================
   FIX: NOMBRES LARGOS EN TIENDA (STOCK)
   ============================================================ */

.stock-item {
    /* Permitir que la tarjeta crezca según el contenido */
    height: auto !important; 
    min-height: 260px; /* Altura mínima para uniformidad */
    
    /* Distribución flexible */
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
    padding-bottom: 20px !important;
}

.stock-name {
    /* 1. Permitir saltos de línea */
    white-space: normal !important;
    word-wrap: break-word !important;
    
    /* 2. Quitar límites de altura y ocultamiento */
    overflow: visible !important;
    text-overflow: clip !important;
    height: auto !important;
    max-height: none !important;
    
    /* 3. Alineación perfecta */
    min-height: 3.5em; /* Reserva espacio para al menos 2-3 líneas */
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1.3 !important; /* Espacio entre líneas */
    margin: 10px 0 !important;
    font-size: 0.95rem !important;
}

/* Ajuste específico para móviles para que no se vean gigantes */
@media (max-width: 768px) {
    .stock-item {
        min-height: 220px;
    }
    
    .stock-name {
        font-size: 0.85rem !important;
        min-height: 3em;
    }
}

/* ============================================================
   MEJORA UX: VISTA MOSAICO (2 COLUMNAS EN MÓVIL)
   ============================================================ */

@media (max-width: 768px) {

    /* 1. ACTIVAR 2 COLUMNAS */
    .stock-grid, 
    .cards-grid {
        grid-template-columns: repeat(2, 1fr) !important; /* Dos tarjetas por fila */
        gap: 8px !important; /* Espacio reducido entre ellas */
    }

    /* 2. TARJETAS COMPACTAS */
    .stock-item, 
    .data-card {
        padding: 10px !important; /* Menos relleno interno */
        min-height: 200px !important; /* Altura uniforme */
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    /* 3. TÍTULOS Y TEXTOS MÁS PEQUEÑOS */
    .stock-name, 
    .card-title {
        font-size: 0.8rem !important; /* Letra pequeña pero legible */
        line-height: 1.2 !important;
        min-height: 2.5em; /* Espacio para 2 líneas de texto */
        margin-bottom: 5px !important;
        white-space: normal !important; /* Permitir 2 líneas */
        text-align: center; /* Centrado se ve mejor en mosaico */
        justify-content: center;
    }

    /* Ajustar cabecera de inventario */
    .card-header {
        flex-direction: column; /* Icono arriba, texto abajo */
        align-items: center;
        text-align: center;
        gap: 5px;
        margin-bottom: 8px;
    }

    /* 4. LOGOS AJUSTADOS */
    .plat-icon-lg {
        width: 40px !important;
        height: 40px !important;
        margin-bottom: 5px !important;
    }
    
    .plat-icon-sm {
        width: 30px !important;
        height: 30px !important;
        margin: 0 !important;
    }

    /* 5. DATOS INTERNOS (OCULTAR ETIQUETAS PARA AHORRAR ESPACIO) */
    .data-row {
        flex-direction: column !important;
        align-items: center !important;
        text-align: center !important;
        font-size: 0.75rem !important;
        border: none !important;
        margin-bottom: 2px !important;
    }
    
    /* Ocultar la palabra "Cliente:", "Vence:", etc. para limpiar visualmente */
    .data-row span:first-child {
        display: none !important; 
    }
    
    /* Hacer el dato (fecha/nombre) más visible */
    .data-row strong, .data-row span {
        font-size: 0.8rem !important;
    }

    /* 6. BOTONES DE ACCIÓN (ICONOS GRANDES) */
    .card-actions {
        display: flex !important; /* Flex en vez de Grid */
        justify-content: space-between;
        gap: 5px !important;
        margin-top: auto;
    }

    .action-btn {
        padding: 6px !important;
        font-size: 1rem !important; /* Emoji más grande */
        flex: 1; /* Que ocupen el mismo ancho */
        border-radius: 6px;
    }
    
    /* Botón Comprar en Stock */
    .buy-btn {
        padding: 8px !important;
        font-size: 0.8rem !important;
        margin-top: 5px !important;
    }

    /* 7. PRECIOS Y BADGES */
    .stock-qty { font-size: 1.4rem !important; }
    .card-badge { 
        font-size: 0.65rem !important; 
        padding: 2px 6px !important;
        margin-top: 2px;
    }
    
    /* Excepción: Dejar PAGOS (Recargas) en 1 columna porque los datos son largos */
    .payments-grid {
        grid-template-columns: 1fr !important;
    }
}

/* ============================================================
   FIX FINAL: MOSAICO 2 COLUMNAS (ULTRA COMPACTO)
   ============================================================ */

@media (max-width: 768px) {

    /* 1. FORZAR 2 COLUMNAS ESTRICTAS */
    #inventory-grid,
    #stock-grid {
        display: grid !important;
        grid-template-columns: repeat(2, 1fr) !important; /* 2 columnas iguales */
        gap: 8px !important; /* Espacio mínimo entre ellas */
        padding: 5px !important;
        width: 100% !important;
        box-sizing: border-box !important;
    }

    /* 2. TARJETA MINIATURA */
    .data-card, 
    .stock-item {
        width: 100% !important;
        min-width: 0 !important; /* Permite que se encoja lo necesario */
        padding: 8px !important; /* Relleno mínimo interno */
        margin: 0 !important;
        border-radius: 12px !important;
        display: flex !important;
        flex-direction: column !important;
        justify-content: space-between !important;
        height: auto !important;
        min-height: 200px !important; /* Altura uniforme */
    }

    /* 3. TEXTOS PEQUEÑOS */
    .card-title, 
    .stock-name {
        font-size: 0.75rem !important; /* Letra pequeña */
        line-height: 1.2 !important;
        white-space: normal !important; /* Permitir 2 o 3 líneas */
        text-align: center !important;
        height: 2.4em !important; /* Altura fija para alineación */
        overflow: hidden !important;
        margin-bottom: 5px !important;
        display: block !important; /* Quitar flex para ahorrar espacio */
    }
    
    .card-header {
        display: block !important; /* Elementos uno debajo del otro */
        text-align: center !important;
        padding-bottom: 5px !important;
        margin-bottom: 5px !important;
    }

    /* Badge (Vencimiento) pequeño */
    .card-badge {
        display: inline-block !important;
        font-size: 0.6rem !important;
        padding: 2px 6px !important;
        margin-top: 2px !important;
    }

    /* 4. IMÁGENES PEQUEÑAS */
    .plat-icon-sm {
        width: 25px !important;
        height: 25px !important;
        margin: 0 auto 4px auto !important; /* Centrado */
        display: block !important;
    }
    
    .plat-icon-lg {
        width: 35px !important;
        height: 35px !important;
    }

    /* 5. DATOS INTERNOS (Compactar) */
    .card-body {
        gap: 4px !important;
        padding: 0 !important;
    }

    .data-row {
        font-size: 0.7rem !important;
        flex-direction: column !important;
        align-items: center !important;
        text-align: center !important;
        border: none !important;
    }

    /* Ocultar etiquetas largas para ahorrar espacio */
    .data-row span:first-child {
        font-size: 0.6rem !important;
        color: #777 !important;
        margin-bottom: 1px !important;
    }
    
    /* El dato importante (Fecha/Nombre) */
    .data-row strong, .data-row span:nth-child(2) {
        font-size: 0.75rem !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        max-width: 100% !important;
    }

    /* Selector de clientes MINI */
    .card-select {
        padding: 2px !important;
        font-size: 0.7rem !important;
        height: 25px !important;
        width: 100% !important;
        max-width: 100% !important;
    }

    /* 6. BOTONES (Malla 2x2 compacta) */
    .card-actions {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important; /* 2 botones por fila */
        gap: 4px !important;
        margin-top: 8px !important;
        padding-top: 5px !important;
    }

    .action-btn {
        padding: 6px 2px !important;
        font-size: 0.9rem !important; /* Emoji visible */
        height: 30px !important;
    }

    /* Botón de Comprar (Tienda) */
    .buy-btn {
        padding: 8px !important;
        font-size: 0.75rem !important;
        margin-top: 5px !important;
    }
    
    /* Ocultar la palabra "Disp." en tienda para ahorrar espacio */
    .label-disp { font-size: 0.65rem !important; }
}

/* === TARJETA DE INVENTARIO MODERNA === */
.inventory-card-modern {
    padding: 0 !important; /* Quitamos padding general para controlar secciones */
    overflow: hidden;
    display: flex;
    flex-direction: column;
    gap: 0;
    border: 1px solid rgba(255,255,255,0.1);
}

/* 1. Cabecera */
.inv-header {
    background: rgba(255,255,255,0.03);
    padding: 12px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid rgba(255,255,255,0.05);
}
.inv-title {
    display: flex; align-items: center; gap: 8px;
    font-weight: bold; color: white; font-size: 0.95rem;
}
.inv-badge {
    font-size: 0.7rem; padding: 3px 8px; border-radius: 4px; font-weight: bold;
}
.badge-success { background:rgba(0,255,136,0.15); color:#00ff88; border:1px solid #00ff88; }
.badge-warning { background:rgba(255,187,0,0.15); color:#fb0; border:1px solid #fb0; }
.badge-danger  { background:rgba(255,0,85,0.15); color:#f05; border:1px solid #f05; }

/* 2. Caja Credenciales */
.inv-creds-box {
    background: #0a0a0a;
    margin: 10px 15px;
    padding: 10px;
    border-radius: 8px;
    border: 1px dashed #333;
}
.cred-row {
    display: flex; justify-content: space-between; align-items: center;
    font-size: 0.85rem; margin-bottom: 4px;
}
.cred-row:last-child { margin-bottom: 0; }
.cred-label { color: #666; font-size: 0.7rem; font-weight: bold; }
.cred-val { color: #aaa; font-family: monospace; }

/* 3. Herramientas (Pin/Fecha) */
.inv-tools {
    display: flex; gap: 5px; padding: 0 15px;
    align-items: flex-end;
}
.inv-input-group { flex: 1; }
.inv-input-group label {
    font-size: 0.65rem; color: #666; margin-bottom: 2px; display: block;
}
.inv-input-group input {
    width: 100%; background: rgba(255,255,255,0.05);
    border: 1px solid #333; color: white;
    padding: 5px; border-radius: 4px; text-align: center;
    font-size: 0.85rem;
}
.btn-save-icon {
    background: var(--secondary); color: black; border: none;
    border-radius: 4px; width: 30px; height: 29px; cursor: pointer;
}

/* 4. Asignación y Switch */
.inv-assign-row {
    display: flex; gap: 10px; padding: 10px 15px; align-items: center;
}
.switch-wrapper { display: flex; align-items: center; }
.switch.compact { transform: scale(0.8); margin: 0; }

/* 5. Botonera Final */
.inv-actions {
    display: grid;
    /* Ajuste automático de columnas según botones */
    grid-template-columns: repeat(auto-fit, minmax(1px, 1fr)); 
    gap: 1px;
    background: #333; /* Color de las líneas separadoras */
    border-top: 1px solid #333;
    margin-top: 5px;
}
.inv-actions .action-btn {
    border-radius: 0; border: none; margin: 0;
    background: rgba(20,20,25,1);
    height: 40px; font-size: 0.85rem;
}
.inv-actions .action-btn:hover { background: #222; }

/* Ajuste Móvil Mosaico */
@media (max-width: 768px) {
    .inventory-card-modern {
        font-size: 0.9rem;
    }
    .inv-creds-box { padding: 8px; margin: 5px; }
    .cred-val { font-size: 0.8rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 100px; }
    .inv-actions .action-btn { font-size: 1rem; padding: 0; } /* Solo iconos en móvil */
}

/* ==========================================
   MENÚ DE ACCIONES (DROPDOWN)
   ========================================== */

/* Contenedor del botón de menú (Posicionado en la esquina de la tarjeta) */
.card-menu-container {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 10;
}

/* El botón de 3 puntos */
.menu-toggle-btn {
    background: rgba(0,0,0,0.3);
    border: 1px solid rgba(255,255,255,0.1);
    color: white;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    cursor: pointer;
    transition: 0.2s;
}

.menu-toggle-btn:hover, .menu-toggle-btn.active {
    background: var(--secondary);
    color: black;
    border-color: var(--secondary);
}

/* La lista desplegable (Oculta por defecto) */
.action-dropdown {
    display: none; /* Se activa con JS */
    position: absolute;
    top: 35px;
    right: 0;
    background: #1a1a1a;
    border: 1px solid #333;
    border-radius: 8px;
    width: 160px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    overflow: hidden;
    z-index: 100;
}

.action-dropdown.show {
    display: block;
    animation: fadeIn 0.2s;
}

/* Botones dentro de la lista */
.dropdown-item {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    padding: 12px;
    background: none;
    border: none;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    color: #ccc;
    font-size: 0.9rem;
    text-align: left;
    cursor: pointer;
    transition: 0.2s;
}

.dropdown-item:last-child { border-bottom: none; }
.dropdown-item:hover { background: rgba(255,255,255,0.1); color: white; }

/* Colores específicos para acciones */
.dd-view { color: var(--secondary); }
.dd-code { color: #ffbb00; }
.dd-renew { color: var(--success); }
.dd-report { color: var(--danger); }

@keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

/* Ajuste para que la tarjeta no corte el menú */
.data-card {
    overflow: visible !important; /* Permitir que el menú salga de la tarjeta */
}


/* ==========================================
   DISEÑO DE CUENTAS MAESTRAS Y PERFILES
   ========================================== */

/* Barra de progreso en la tarjeta principal */
.master-progress-bg {
    background: rgba(255,255,255,0.1);
    height: 6px;
    border-radius: 10px;
    margin: 10px 0;
    overflow: hidden;
}
.master-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--secondary), var(--success));
    transition: width 0.5s ease;
}

/* Modal: Grid de Perfiles (Slots) */
.slots-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); /* Adaptable */
    gap: 15px;
    margin-top: 15px;
}

/* Tarjeta Individual de Perfil (Slot) */
.profile-slot-card {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 12px;
    padding: 0;
    overflow: hidden;
    position: relative;
    transition: 0.2s;
}

.profile-slot-card.occupied {
    border-color: rgba(0, 255, 136, 0.3);
    background: rgba(0, 255, 136, 0.02);
}

/* Cabecera del Slot */
.slot-header {
    padding: 10px 15px;
    background: rgba(0,0,0,0.3);
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid rgba(255,255,255,0.05);
}

.slot-number { font-weight: bold; color: var(--secondary); font-size: 0.9rem; }
.slot-status { font-size: 0.7rem; padding: 2px 8px; border-radius: 4px; text-transform: uppercase; font-weight: 800; }
.st-free { color: #aaa; border: 1px solid #555; }
.st-busy { color: var(--success); border: 1px solid var(--success); background: rgba(0,255,136,0.1); }

/* Cuerpo del Slot */
.slot-body { padding: 15px; }

/* Inputs dentro del Slot */
.slot-input-row {
    display: flex; gap: 8px; margin-top: 10px;
}
.slot-input {
    background: rgba(0,0,0,0.4); border: 1px solid #444; color: white;
    padding: 5px; border-radius: 5px; font-size: 0.85rem; text-align: center; width: 100%;
}
.slot-input:focus { border-color: var(--secondary); outline: none; }

/* Botones del Slot */
.slot-actions {
    display: flex; border-top: 1px solid rgba(255,255,255,0.05);
}
.slot-btn {
    flex: 1; background: none; border: none; padding: 10px;
    color: #ccc; cursor: pointer; font-size: 1.1rem;
    transition: 0.2s; border-right: 1px solid rgba(255,255,255,0.05);
}
.slot-btn:last-child { border: none; }
.slot-btn:hover { background: rgba(255,255,255,0.1); color: white; }

/* Datos Maestros (Header del Modal) */
.master-header-box {
    background: linear-gradient(135deg, rgba(0,198,255,0.1), rgba(0,0,0,0));
    border: 1px solid var(--secondary);
    padding: 15px;
    border-radius: 12px;
    margin-bottom: 20px;
    text-align: center;
}
.copy-master-btn {
    background: var(--secondary); color: black; border: none;
    padding: 5px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: bold;
    cursor: pointer; margin-top: 10px;
}

/* ============================================================
   FIX MÓVIL: GESTIÓN DE CUENTAS MAESTRAS (RESPONSIVE)
   ============================================================ */

@media (max-width: 768px) {

    /* 1. AJUSTE DEL MODAL GENERAL */
    #modal-reseller-master .modal-content {
        padding: 10px !important; /* Menos relleno para ganar espacio */
        width: 100% !important;
        max-height: 100vh !important;
        border-radius: 0 !important; /* Cuadrado en móvil para aprovechar bordes */
    }

    /* 2. CABECERA MAESTRA (Correo y Clave) */
    .master-header-box {
        padding: 10px !important;
        margin-bottom: 15px !important;
        word-break: break-all; /* CRÍTICO: Rompe correos largos para que bajen de línea */
    }
    
    .master-header-box div {
        font-size: 1rem !important; /* Ajustar tamaño de fuente */
        line-height: 1.3;
    }

    /* 3. GRILLA DE PERFILES (1 Columna en móvil) */
    .slots-grid {
        grid-template-columns: 1fr !important; /* Una sola tarjeta por fila */
        gap: 10px !important;
    }

    /* 4. TARJETA DE PERFIL INDIVIDUAL */
    .profile-slot-card {
        margin-bottom: 5px;
    }

    /* Cabecera del Slot */
    .slot-header {
        padding: 8px 10px !important;
    }
    
    .slot-number {
        font-size: 0.85rem !important;
        /* Evitar que nombres largos rompan la cabecera */
        max-width: 60%;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    /* Cuerpo del Slot */
    .slot-body {
        padding: 10px !important;
    }

    /* Inputs (PIN y Fecha) */
    .slot-input-row {
        gap: 5px !important;
    }
    
    .slot-input {
        font-size: 0.9rem !important;
        height: 35px !important; /* Más alto para dedos */
        padding: 0 5px !important;
    }

    /* Selector de Cliente */
    .slot-body select.slot-input {
        margin-bottom: 8px !important;
        width: 100% !important;
        text-overflow: ellipsis; /* Si el nombre del cliente es largo, poner ... */
    }

    /* 5. BOTONES DE ACCIÓN (Grandes para tocar fácil) */
    .slot-actions {
        border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    .slot-btn {
        padding: 12px 0 !important; /* Zona táctil más grande */
        font-size: 1.2rem !important;
    }
    
    /* Botón Copiar Cabecera */
    .copy-master-btn {
        width: 100%;
        padding: 10px;
        margin-top: 10px;
        font-size: 0.9rem;
    }
}

/* ==========================================
   CORRECCIÓN VISUAL: TARJETA SIMPLE
   ========================================== */

.inv-clean-header {
    background: rgba(255,255,255,0.03);
    padding: 10px 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    gap: 10px; /* Separación entre título y badge */
}

.inv-clean-title {
    display: flex; 
    align-items: center; 
    gap: 8px;
    color: white; 
    font-weight: 700; /* Letra más gruesa */
    font-size: 0.95rem;
    
    /* MAGIA PARA QUE NO DESAPAREZCA */
    flex: 1; /* Ocupa todo el espacio disponible */
    min-width: 0; /* Permite que el texto se encoja si es necesario */
}

/* El texto dentro del título */
.inv-clean-title span {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block;
    width: 100%;
}

.inv-badge {
    flex-shrink: 0; /* Evita que el badge se aplaste */
    font-size: 0.65rem; 
    padding: 3px 8px; 
    border-radius: 4px; 
    font-weight: 800; 
    letter-spacing: 0.5px;
}

/* AJUSTE MÓVIL ESPECÍFICO */
@media (max-width: 768px) {
    .inv-clean-header {
        padding: 8px 6px; /* Menos padding en bordes */
    }
    
    .inv-clean-title {
        font-size: 0.8rem; /* Tamaño legible en móvil */
    }
    
    .inv-clean-title img {
        width: 20px; 
        height: 20px; /* Logo controlado */
    }
    
    /* Quitamos el max-width fijo que estaba causando el problema */
    .inv-clean-title span {
        max-width: none !important; 
    }
}

/* ==========================================
   TRANSFORMACIÓN: DE TARJETA A LISTA COMPACTA (MÓVIL)
   ========================================== */

@media (max-width: 768px) {
    
    /* 1. Resetear el Grid a 1 sola columna */
    #inventory-grid {
        grid-template-columns: 1fr !important;
        gap: 8px !important;
    }

    /* 2. Convertir la tarjeta en una Fila Horizontal */
    .inventory-card-clean {
        flex-direction: row !important; /* Elementos de lado a lado */
        align-items: center;
        padding: 5px 10px !important;
        min-height: 70px !important;
        height: auto !important;
        flex-wrap: wrap; /* Permitir que se expanda si es necesario */
    }

    /* 3. Ajustar Cabecera (Izquierda) */
    .inv-clean-header {
        border-bottom: none !important;
        padding: 0 !important;
        background: none !important;
        width: auto;
        flex: 1; /* Ocupa el espacio disponible */
        justify-content: flex-start;
        gap: 10px;
    }

    .inv-clean-title {
        font-size: 0.9rem !important;
    }
    .inv-clean-title img {
        width: 30px !important; height: 30px !important; margin: 0 !important;
    }
    
    /* Ocultar el nombre largo si no cabe, dejar solo logo en casos extremos */
    .inv-clean-title span {
        max-width: 120px;
    }

    /* 4. Mover el Estado (Badge) */
    .inv-badge {
        font-size: 0.6rem !important;
        padding: 2px 5px !important;
        position: absolute;
        top: 5px;
        right: 40px; /* Al lado del menú */
    }

    /* 5. Ocultar los controles de edición directa para ahorrar espacio */
    /* El usuario tendrá que usar el menú de 3 puntos para editar */
    .inv-clean-tools, 
    .inv-clean-assign,
    .switch-container {
        display: none !important; 
    }

    .inv-clean-assign {
        display: block !important;
        width: 100%;
        padding: 0 !important;
        margin-top: 5px;
    }
    .card-select { border:none; background:transparent; padding:0; height:auto; color:#aaa; font-size:0.8rem; }
    .switch-wrapper { display: none; }
    
    /* 6. El botón de menú (⋮) */
    .card-menu-container {
        position: static !important; /* Ya no es absoluto */
        margin-left: auto;
    }
    .menu-toggle-btn {
        width: 35px; height: 35px;
        background: transparent; border: none;
    }
}

/* ============================================================
   FIX: VISIBILIDAD DEL SWITCH EN MÓVIL
   ============================================================ */

@media (max-width: 768px) {
    
    /* 1. Forzar que la tarjeta Maestra ocupe todo el ancho */
    .inventory-card-clean.is-master {
        grid-column: 1 / -1 !important;
        width: 100% !important;
    }

    /* 2. Contenedor del Switch: Asegurar altura y display */
    .is-master .switch-container {
        display: flex !important;
        justify-content: space-between !important;
        align-items: center !important;
        width: 100% !important;
        padding: 10px !important;
        background: rgba(255,255,255,0.08) !important; /* Fondo un poco más claro para verlo */
        margin-bottom: 10px !important;
        min-height: 45px !important; /* Altura mínima obligatoria */
    }

    /* 3. Texto del Label: Que ocupe el espacio sobrante pero no empuje */
    .is-master .switch-label {
        font-size: 0.85rem !important;
        color: white !important;
        white-space: nowrap !important;
        overflow: hidden;
    }

    /* 4. EL SWITCH REAL: PROHIBIDO ENCOGERSE (LA CLAVE) */
    .is-master .switch {
        flex-shrink: 0 !important; /* ESTO EVITA QUE DESAPAREZCA */
        width: 45px !important;
        height: 24px !important;
        display: block !important;
        position: relative !important;
        margin-left: 15px !important; /* Separación del texto */
    }

    /* 5. Asegurar que el slider (la bolita) se vea */
    .is-master .slider {
        background-color: #444 !important;
        opacity: 1 !important;
        visibility: visible !important;
    }
    
    .is-master input:checked + .slider {
        background-color: var(--success) !important;
    }
}

/* ============================================================
   TARJETAS ESTABILIZADAS (GRID + TRUNCADO)
   ============================================================ */

.inventory-card-clean {
    height: 100%; /* Para que en el grid todas tengan la misma altura */
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    background: rgba(20,20,25,0.9); /* Un poco más sólido para leer mejor */
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 12px;
    overflow: hidden; /* Nada se sale de la tarjeta */
}

/* 1. CABECERA FIJA */
.inv-clean-header {
    height: 45px; /* Altura fija obligatoria */
    padding: 0 10px;
    background: rgba(255,255,255,0.03);
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid rgba(255,255,255,0.05);
}

.inv-clean-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: bold;
    color: white;
    font-size: 0.9rem;
    overflow: hidden; /* Ocultar sobrante */
    white-space: nowrap; /* No permitir saltos de línea */
    max-width: 70%; /* Dejar espacio al badge */
}

.inv-clean-title span {
    text-overflow: ellipsis;
    overflow: hidden;
}

.inv-badge {
    font-size: 0.65rem;
    padding: 3px 6px;
    border-radius: 4px;
    font-weight: 800;
    white-space: nowrap;
    flex-shrink: 0; /* No dejarse aplastar */
}

/* 2. CUERPO FLEXIBLE PERO CONTROLADO */
.card-body {
    padding: 10px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    flex: 1; /* Ocupa todo el espacio disponible empujando el footer abajo */
}

/* Filas de datos estables */
.stable-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 32px; /* Altura fija por fila */
    gap: 10px;
}

.stable-label {
    font-size: 0.7rem;
    color: #777;
    width: 50px; /* Ancho fijo para etiquetas */
    flex-shrink: 0;
}

/* Inputs y Selects */
.card-select, .mini-input {
    flex: 1; /* Ocupar el resto del espacio */
    background: #0a0a0a;
    border: 1px solid #333;
    color: #ddd;
    border-radius: 6px;
    height: 30px; /* Altura fija */
    font-size: 0.85rem;
    padding: 0 8px;
    width: 100%; /* Asegurar ancho */
}

/* 3. BOTONERA INFERIOR PEGADA AL FONDO */
.inv-clean-actions {
    margin-top: auto; /* Empujar al fondo */
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 40px; /* 3 botones iguales + 1 pequeño */
    gap: 1px;
    background: #333;
    border-top: 1px solid #333;
}

.inv-clean-actions .action-btn {
    border-radius: 0;
    border: none;
    background: rgba(30,30,35,1);
    height: 40px;
    font-size: 0.75rem;
    color: #ccc;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%; /* Llenar la celda del grid */
}

.inv-clean-actions .action-btn:hover { background: #444; color: white; }

/* 4. SWITCH FLOTANTE ESTABLE */
.switch-stable-container {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 10px;
    height: 25px;
}

/* Colores Badge */
.badge-success { background:rgba(0,255,136,0.1); color:#00ff88; border:1px solid #00ff88; }
.badge-warning { background:rgba(255,187,0,0.1); color:#fb0; border:1px solid #fb0; }
.badge-danger  { background:rgba(255,0,85,0.1); color:#f05; border:1px solid #f05; }

/* AJUSTES MÓVILES */
@media (max-width: 768px) {
    .inv-clean-title { font-size: 0.8rem; }
    .inv-clean-actions .action-btn { font-size: 0.7rem; padding: 0; }
    
    /* En móvil, el selector y los inputs ocupan todo el ancho */
    .stable-row { flex-wrap: wrap; height: auto; gap: 2px; margin-bottom: 5px; }
    .stable-label { width: 100%; display: none; /* Ocultar etiquetas en móvil para ahorrar espacio */ }
    
    /* El switch en tarjetas maestras */
    .is-master .switch-stable-container {
        justify-content: space-between;
        background: rgba(255,255,255,0.05);
        padding: 5px 10px;
        border-radius: 6px;
        height: 40px;
    }
}

/* --- DASHBOARD V2 --- */
.welcome-banner {
    background: linear-gradient(90deg, var(--primary) 0%, #004e92 100%);
    padding: 20px;
    border-radius: 15px;
    color: white;
    margin-bottom: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 15px rgba(0,198,255,0.3);
}

.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-bottom: 20px;
}

.dash-card {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.05);
    border-radius: 12px;
    padding: 15px;
    text-align: center;
    transition: transform 0.2s;
}

.dash-card:hover { transform: translateY(-5px); background: rgba(255,255,255,0.08); }

.dash-card h3 { font-size: 0.8rem; color: #aaa; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 1px; }
.dash-card .value { font-size: 1.8rem; font-weight: 800; color: #fff; font-family: 'Rajdhani', sans-serif; }

/* Tarjetas Especiales */
.card-urgent { border-bottom: 4px solid var(--warning); }
.card-money { border-bottom: 4px solid var(--secondary); }
.card-sales { border-bottom: 4px solid #991EEB; }

.tasa-badge {
    background: rgba(0,0,0,0.3);
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 5px;
}

.quick-actions {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
}

.action-btn {
    background: rgba(255,255,255,0.05);
    border: none;
    padding: 15px;
    border-radius: 10px;
    color: white;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    transition: 0.2s;
}
.action-btn:hover { background: var(--primary); color: #000; }

/* --- TARJETAS DE PRECIOS V2 --- */
.prices-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); /* Tarjetas responsivas */
    gap: 15px;
    margin-top: 15px;
}

.price-card-v2 {
    background: rgba(30, 30, 30, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 12px;
    padding: 12px;
    position: relative;
    transition: transform 0.2s, border-color 0.2s;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.price-card-v2:hover {
    transform: translateY(-3px);
    border-color: rgba(255, 255, 255, 0.2);
    background: rgba(40, 40, 40, 0.8);
}

.pc-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 5px;
}

.pc-cost {
    font-size: 0.75rem;
    color: #888;
    background: rgba(0,0,0,0.3);
    padding: 4px 8px;
    border-radius: 6px;
    display: inline-block;
    width: 100%;
    text-align: center;
}

.pc-input-group {
    position: relative;
    display: flex;
    align-items: center;
}

.pc-symbol {
    position: absolute;
    left: 10px;
    color: var(--secondary); /* Verde neón */
    font-weight: bold;
    font-size: 0.9rem;
    pointer-events: none;
}

.pc-input {
    width: 100%;
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid #444;
    color: #fff;
    padding: 8px 8px 8px 25px; /* Espacio para el signo $ */
    border-radius: 8px;
    font-weight: bold;
    font-size: 1rem;
    outline: none;
    transition: border-color 0.2s;
}

.pc-input:focus {
    border-color: var(--secondary);
    background: rgba(0, 0, 0, 0.8);
}

/* La píldora de ganancia */
.profit-badge {
    font-size: 0.75rem;
    text-align: center;
    padding: 4px;
    border-radius: 6px;
    font-weight: 600;
    transition: background 0.3s;
}

.profit-positive { background: rgba(0, 255, 136, 0.15); color: #00ff88; border: 1px solid rgba(0, 255, 136, 0.3); }
.profit-neutral { background: rgba(255, 255, 255, 0.1); color: #aaa; }
.profit-negative { background: rgba(255, 50, 50, 0.15); color: #ff5555; border: 1px solid rgba(255, 50, 50, 0.3); }